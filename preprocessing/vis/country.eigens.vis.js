/*
* @Author: Yinlong Su
* @Date:   2016-04-26 10:34:57
* @Last Modified by:   Yinlong Su
* @Last Modified time: 2016-04-26 12:24:31
*/


var dataset_pca = [[1.1249790092222332, -0.8740764212432209], [-1.3155072212025445, 0.7409449071883573], [-3.6806726823284466, 0.4845611077917724], [0.551607476528318, -0.27609842390172], [-0.1609256455041773, 0.11068943231569109], [0.4638490519856899, -0.7154224117021951], [1.0695868713746035, 0.12007849578205075], [-0.4541854100492076, -0.06625688612140991], [-0.272659487143757, 0.2180199273214584], [-3.3105569974850546, -0.7390748048669074], [0.32644455709952264, 0.43695917463486256], [-0.14923236611211899, -0.18312419115272588], [1.107924219161009, -0.8636715735153112], [-1.133104864809856, 0.9608773189952438], [-1.262937224769727, -0.5794697415962543], [0.20214975264076357, -1.0994077184339575], [-0.0048934296886428445, 6.823255343595], [0.9900018006218811, 0.7409687974408614], [0.5968287627642028, 0.9204575167278954], [-0.7439556611072765, 0.253630940464312], [-0.47600807220499713, 0.38138954664644525], [-0.3146863109350321, -0.34084191212867754], [-0.40368234532932096, -2.206456871623706], [0.6212964813252884, -0.3872165935096829], [-3.4111836205365975, -1.063395258557736], [-2.6033881195103468, -1.0137959652756519], [2.588364823238032, -0.5131067041211003], [-0.203593813355424, 0.04582309438515114], [1.3401324864166946, -1.0567405010996704], [1.0981124446054533, -1.3730926225023286], [-2.923790429554226, -0.1157700995731042], [-0.534822675935548, -0.06239515818903657], [0.5980473701346163, -0.36675720622550667], [-1.2431476830039583, 0.005333398048493329], [1.389903045521887, 2.497259553502533], [0.6271180558685594, -0.21833535559899508], [1.4370545090200928, -1.1062050192510011], [4.905062190417379, 0.6832433871054017], [-0.5416162516790113, 0.4198047288193768], [-0.7141630064158789, -0.25830497411116876], [0.27421868100962354, 0.33497736603161676], [-0.6025556551091351, -2.135126794724394], [2.1734498372524715, -1.4862597883386481], [0.3701073791566277, -0.31860287438002155], [-1.7587106393174676, -0.7529826403105766], [-3.3581020047184675, -0.7167134885643877], [-1.4828233845755083, -0.79087077790474], [0.8861571414006155, -1.012119334938659], [-0.7377505381260124, 0.18109192943564306], [0.051467647094364195, -1.6445679178697301], [0.38079774428005364, 0.6878471392752082], [-0.00721349504232887, 0.4730788858822777], [-0.9339238536352588, 0.06564434927012526], [2.1120313478789976, -1.1599869215659522], [-0.1960106266121756, -0.3641903944221118], [1.8212261011067243, -1.4642620378706444], [-0.2357349534152361, 0.7337874146122753], [3.7706890519187617, -1.4126103154281526], [-0.36719532117194226, -0.9032989242911764], [0.19658705768331508, 5.899807164299067], [2.2792746734110008, 0.17790243147918186], [-3.4343129998612674, -0.872190478469144], [-0.02562175089268825, 0.6004302940520091], [3.420859637252328, -1.0792076912471151], [-0.45680510364556626, -0.7981733345866515], [1.805364298924582, -0.6871973853355251], [1.932402349067122, 0.2934956807634438], [2.5901410547390107, 0.7783335787809917], [-0.7672122345328027, 0.7120566549548152], [-2.812587096251087, -0.6631653845115708], [2.0780253892796363, 0.9657966126015052], [-0.0604349678014205, -0.04409228416350787], [0.7247109266598211, 1.8494194839511853], [1.6152608150479266, -0.3239264682708438], [0.10434533007670245, 0.3828273514160657], [-1.6697494510697952, 2.3396342057508126], [-3.4493217096217244, -0.4732593706964277], [-0.2930730970208594, 0.9139150457108366], [-0.8471712508454939, 5.542595768207936], [0.74881945129987, 1.0428557161486596], [-0.7380652891638886, -0.3289722663299426], [0.6179178163807458, -0.3485373065322433], [-0.8492826701173087, -2.436590948175008], [0.47011223266321306, -1.0807814735695926], [-0.5200574603210956, -1.0420907265907176]];
var dataset_mds_euclidean = [[0.08636324261712236, 0.021301656502859215], [-0.005782705795962381, -0.08387865181112955], [-0.12871598304888096, -0.06643524175771356], [0.03584605964783482, -0.024215080050347615], [0.010896065431445225, 0.012833965084672896], [0.06812975049495851, 0.04684071621339399], [-0.004602134697179277, -0.04814359379523857], [-0.026659658046328135, -0.00299427364245416], [-0.021037729838931374, -0.03037441949923826], [-0.11493967321309186, -0.03543709351864746], [0.07766418430872611, 0.0746057369301478], [-0.008602436759403793, -0.031408178297260975], [0.02465373076090201, 0.025987866008442467], [-0.057672982111433006, -0.03199722203802086], [-0.00917263541911048, -0.07668272854832643], [0.0026508363735274266, 0.04281620036309208], [-0.14548943849221987, 0.00091857547063399], [0.03652364492185078, -0.047559854455969795], [0.0720858612609009, -0.05334572428718968], [-0.03976153147268718, -0.024598456155570603], [-0.050379793740599324, -0.02316850292108695], [0.03979672795661512, -0.035095611209927845], [-0.04342460517611211, 0.06612584412406328], [-0.11823645283654835, 0.021688006346348362], [-0.09987356755473951, -0.0551170793747972], [-0.11184990803093742, -0.03285266114708989], [0.14164173310782285, 0.12109001577531162], [-0.03930811023524863, -0.02746978764063458], [0.005618307395362548, 0.0668117834885966], [0.036718957496055846, 0.030583247765323167], [-0.13181174498072334, -0.0473793434579081], [-0.06319549610875698, -0.014319077731446857], [0.012107986805986876, 0.02592167746802439], [-0.0896269922255833, -0.0028617506384463138], [0.01958059602791141, -0.10931241623868995], [0.02174438265591864, -0.01620702038552836], [0.12463081199040435, -0.003353208044142541], [-0.16777867676576003, 0.1556787207064864], [-0.15698373627787862, -0.08477569816799452], [-0.04797100470540414, -0.052945665291360786], [0.05918925281279455, -0.006162103385442975], [-0.022742649832156563, 0.11143053465120933], [0.27399681915896945, 0.12064253054196156], [-0.15715736452896, -0.15009683256487655], [-0.08807074252174844, -0.006962757870477171], [-0.10862915907071045, -0.02519279021570232], [-0.0663517686538763, 0.010084045711173517], [0.06823677698835445, 0.02674113421891486], [-0.047259551538498236, -0.043501182205206525], [-0.007889123653946811, 0.09236140408784892], [0.008187427429688563, 0.027110768361107537], [-0.032346219801860705, -0.016170552591753113], [0.022236734033917828, -0.022116144390265907], [0.13221217267627977, 0.09631906142403474], [-0.038713045961715195, 0.06778460805640911], [0.19159192793034066, 0.12425353434018678], [0.02815880179203186, -0.013837819498738121], [0.23173650595590653, -0.08218662359337611], [-0.05693887050078883, -0.012978408991072663], [0.04313809230248076, 0.005240342491044095], [0.15452461188432662, 0.03802150756165564], [-0.09691468190490049, -0.09479584192326118], [0.02582323856237774, -0.00768833008052893], [0.17707130675500163, 0.21663070648514113], [-0.06741283900126567, -0.03214367042992638], [0.10511309828317432, 0.05097670693137568], [0.006698262014037498, 0.024243343132438505], [0.08992043337074684, -0.005877518126329441], [0.005307049929482715, -0.033961784089308174], [-0.09623120912512995, -0.032327666489552764], [0.15259660570920672, -0.018342968104016182], [-0.02272023484966319, -0.009757229963402416], [0.0423653204190778, 0.00949484352447342], [0.07979377799600183, 0.016073001869833917], [0.007519796613650383, -0.009790744967006909], [-0.07735787291083752, -0.06802219878147822], [-0.11220270162826225, -0.06579896376526816], [0.059064577903881976, 0.03389298004145253], [-0.05742493821866003, -0.06375605590486981], [0.04392765018724913, 0.022683981768880875], [-0.0036543586948509853, -0.0743687314415542], [0.06745745934976545, 0.026780632333064065], [-0.04229848371621053, 0.11961460305001544], [-0.016731295846024972, 0.0488218221323214], [0.009403530181495895, -0.04464084548236379]];
var dataset_mds_cosine = [[-0.0008158671126171318, -0.006740404980307755], [0.07507308894268024, -0.007480743814476178], [0.00023443956835713517, 0.0728861243532047], [-0.008098316041467121, -0.009293369519393224], [0.01110355758979657, 0.0037513244791551694], [-0.004447564127549489, -0.0046573769857063884], [0.04485043137893471, 0.0050650032941784735], [-0.0066067309687742855, 0.0012554046117403367], [0.016700718463680098, 0.003536851512280818], [-0.11662256984554863, -0.021252198201155315], [-0.07851557153033517, -0.0055547134692140645], [0.013109631995701051, -0.0007749052647946797], [-0.003960178693291841, 0.0008559352610292715], [0.049306071678929766, 0.0006558854174102323], [0.03062963831253981, -0.009225072832047739], [-0.0068709785261508284, 0.0040610198451787], [-0.009750195109464222, 0.0358581001671104], [0.053086789692187566, 0.002025046976888065], [0.03885294703108838, -0.013178099892137122], [0.007361852439180851, -0.0023010157223274865], [0.01313243622181391, 0.0029360022648144152], [0.027089026409148568, -0.023775976048479742], [-0.029058732956589374, 0.020763840567554648], [0.028651536623270017, 0.02834852696628403], [-0.08237835196505988, 0.007428532478728474], [-0.03404170513943957, 0.011582283739808939], [-0.012024779513311098, -0.008390308028591234], [0.005143756258500449, 0.0027781331448864916], [-0.015677940568680968, 0.007773927063205101], [-0.016985213052083194, 0.0011159657147776822], [-0.03734583645011419, 0.003176558025916184], [0.007158593025681876, 0.013031362575999435], [0.00036877989472403034, 0.0018513620929375618], [0.005355718922406857, 0.010710026560868922], [0.057407786893326006, -0.012987113947192245], [-0.017105901592207887, -0.006851858529771781], [-0.061047951557132385, -0.016997386188188184], [0.06535128471577976, 0.04696589767580895], [0.07100993334758697, 0.041540059968928206], [0.0093112428770418, -0.00035593835820196986], [0.014519011886814722, -0.005795053286748316], [-0.10755123016465734, 0.03955163256860759], [-0.08460170263486419, -0.014714075325086451], [0.1776693512163782, -0.03535570925711247], [-0.023422723763267376, 0.004620686721335701], [-0.1159971865790582, -0.020070342806788325], [-0.02652733581267582, 0.003034580478143418], [-0.02106572344966205, -0.007260981310368845], [0.008923620696638511, -0.00235455923328857], [-0.04750462684415216, 0.012840979406306298], [0.02476110705495423, 0.0068424069435152664], [0.01030814183343682, 0.00241524919683604], [0.03305843740449767, -0.0013098594793110355], [-0.0023280759217270755, -0.0037040214123723087], [-0.05346567843922013, 0.0073835189065942575], [-0.0013071275309494911, -0.0013031367764108914], [0.011030612543852066, -0.004172956570318576], [0.010331098192421357, -0.019933780831453703], [-0.004237079905502108, 0.0024778045756645296], [0.025223822748596806, -0.012550293909973505], [0.0049974224182194275, -0.012227142623478092], [0.11485244576404482, 0.013866177262790505], [0.01953368346139493, -0.00030487776552159355], [-0.03163064543055772, 0.007643564633554343], [0.004191520160023827, 0.010082773851459474], [-0.013911554777614766, -0.00695557413390504], [0.023711117819689497, 0.01830958635779085], [0.04319504198285783, 0.002270797257653299], [0.03217925755897601, 0.009990114748135315], [-0.07313754080225933, -0.11116040432972824], [0.030383559821082717, -0.021595157521198897], [0.00633718021111576, 0.0030327534084666767], [-0.007015402975185896, -0.005109892474584003], [-0.00012367540010871787, -0.008640588463150987], [0.006932458857802226, 0.0010404555978746491], [0.027592779926582472, -0.00283122543047473], [-0.07772375135704823, -0.012286994868350904], [0.07990850561745609, 0.01187665721347525], [0.016505427879828477, -0.01160068975467475], [-0.003557116001031249, -0.003385300596459254], [0.04996114697530788, -0.009614366562174051], [-0.010684932319545093, -0.005914487792021058], [-0.11507609422164825, 0.021557449030942692], [-0.043586959254210085, 0.010374388088666914], [-0.0005854659795662493, -0.02919679670956867]];
var dataset_mds_correlation = [[0.00470319858547918, -0.009773410724641919], [0.14658775083366615, -0.033343889802214775], [-0.05358251753662372, 0.12898337898518966], [-0.014102337814528713, -0.020039797870532346], [0.015489050053478622, 5.363386632675037e-05], [-0.0024991913114933277, -0.0067271487015796855], [0.074962366209716, 0.003916560559757279], [-0.014528139699269287, 0.003173278215218288], [0.028266267948621075, 0.001234953992428464], [-0.1389742087221049, -0.014959920331424115], [-0.12806483373564723, 0.0009278379199936428], [0.024672357420767344, -0.00492973914992016], [-0.006448320519561299, 0.003313740705055562], [0.08454781143874607, -0.00261296488301613], [0.0654502952015808, -0.0216246823101801], [-0.01723244373813007, 0.008367383239494035], [-0.04627099711390937, 0.06933435733261963], [0.08964153716607985, -0.003344658782971648], [0.07238498238727756, -0.01879618949665271], [0.011577676206744316, -0.007952972138531151], [0.02205893778258914, 0.002822359297675121], [0.05960195031898007, -0.04450542496938476], [-0.0681478138530718, 0.047281606032188436], [0.027949341634529917, 0.05027441056555278], [-0.13387397844509766, 0.02097699913315808], [-0.07949772182172855, 0.028685662896248618], [-0.01642507801023335, -0.015438882294546251], [0.007187065246380896, 0.005117294167816971], [-0.03179495099788068, 0.01707245676963821], [-0.034985178240794335, 0.004663061938821064], [-0.10884010658722819, 0.008228190628486226], [0.0009024702099323145, 0.024306084162215694], [-0.0032930407051966143, 0.002077756285124617], [0.004359565862450762, 0.021640696118125503], [0.11124577303473573, -0.03045006588527648], [-0.027646095641423382, -0.007903973229987003], [-0.09186214234366104, -0.021450402340045475], [0.06066875279267806, 0.07642195787486128], [0.08910091008953744, 0.062431000731249214], [0.016053527196412117, -0.003691507689277619], [0.030766014685711888, -0.016523416372223456], [-0.21828164978448628, 0.07260596457779095], [-0.11531693924861887, -0.012302737526906261], [0.28043735341985293, -0.06273464604183301], [-0.05923846569871075, 0.010438349554325994], [-0.13816522855603772, -0.014164624637035722], [-0.055124614989690686, 0.008946892249806663], [-0.02888257711243106, -0.0073426190618155526], [0.020796985487428973, -0.003068935092490311], [-0.09764471669682924, 0.03159828988270695], [0.04150308208634301, -0.001123595059088681], [0.01489527213140367, 0.0012000673206244105], [0.061830609472336207, -0.021476958565118956], [0.0007340288843876527, -0.003998251170849294], [-0.11026970453677681, 0.021460089935985104], [0.0028061021474641867, 0.00023108660105410628], [0.02004606642241964, -0.017860657243660462], [0.022734513604832356, -0.03646273090401279], [-0.009011166047048092, 0.00636052482218441], [0.05396501060206656, -0.03719378378430556], [0.020468515274185407, -0.015454477381698015], [0.19794552638994786, 0.003576242267788456], [0.037052456604673004, -0.009244326349441856], [-0.06644110902485569, 0.016783804024760172], [0.0031113160138145335, 0.019978489325377026], [-0.0134970052346079, -0.007350910069066562], [0.0247824952366701, 0.03418398365487603], [0.06292240187635832, 0.006508104780871907], [0.050374924234682796, 0.0024800772674285756], [-0.0750752991086299, -0.16417822924180692], [0.05741893267181378, -0.023802453161123914], [0.008597868628016665, 0.003954604630208139], [-0.009462238949583299, -0.008389524985419661], [0.007613473702507381, -0.012731443214673248], [0.011214926862739375, -0.0008289777494914441], [0.054869840949976934, -0.014171815814550353], [-0.08892843813234869, -0.007435951231549242], [0.17090197870895169, -0.0049359132221065945], [0.03620225769294365, -0.027599050175258114], [-0.0053581750614201135, -0.007002934949737619], [0.10300972680265585, -0.034417918692753055], [-0.012543524982457775, -0.006880420227330058], [-0.20517288563954109, 0.04478682540812413], [-0.08205864045686428, 0.025049779748947402], [-0.0058717921160460936, -0.05522490494457646]];
var dataset_isomap = [[0.280880885993969, -0.03710091088915115], [-0.2476465516076022, 0.10133306053773249], [-0.46564559039309644, -0.21204219649372577], [0.03324224661760598, -0.004787628517802552], [-0.043723723047573826, 0.10201570392004833], [0.2006345204937722, -0.038243406022788], [-0.02435263135225231, 0.28900541676703445], [-0.05860879739783156, -0.02750250308742677], [-0.0527114234232338, 0.06973483222243547], [-0.4039002427914594, -0.18490985275317975], [0.09638292976163526, -0.31591432667472685], [-0.03466899536687825, 0.07974035683948959], [0.22789345441460201, -0.035494812143931666], [-0.18963826045403775, 0.07777532295174248], [-0.18414123575598332, 0.046754447285886985], [0.10396262299527939, -0.04698122187710077], [-0.18164854581306425, 0.16567525682157536], [0.008853771587234665, 0.33526676050426296], [0.2958486843562058, 0.11290379741786542], [-0.13393170277096528, 0.05371816683013356], [-0.11240945297118579, 0.08326159896828662], [-0.08892357932083006, 0.11116359250010946], [0.10048984256021393, -0.153655764121229], [-0.07594482538396842, 0.276720309721714], [-0.38915182228249473, -0.17863884866553767], [-0.3138529812014112, -0.14506518915077005], [0.45344836836432756, -0.11151688540926849], [-0.059654725504069556, 0.036566544292790916], [0.23207183739369053, -0.005821848344981248], [0.1506614718768101, -0.08268221854224915], [-0.3969293125746127, -0.18198648858215088], [-0.060375382069515475, 0.06377592167582893], [0.0692397514645117, -0.034336681290156414], [-0.20124255021361148, 0.02516607849776084], [0.06557122504467112, 0.23986956326913358], [0.12821542344027773, -0.03210250786300403], [0.30542297397628504, -0.2977100778123167], [0.18622835108582622, 0.6368841778899517], [-0.19397799939189642, 0.2513715898216342], [-0.14501660181343937, 0.03260396301082349], [0.00028811978400571, 0.09310616925256732], [0.047823144291584865, -0.3315144394386132], [0.4697372264985002, -0.5044108699220807], [-0.31116748015352264, 0.20763646665819172], [-0.23109490863359955, -0.10761791076446356], [-0.40597520279509824, -0.1859833928961937], [-0.1612276267828713, -0.09162090591944501], [0.23596880569237813, -0.102308242886083], [-0.11520043172760136, 0.027047082527343808], [0.07430043423309181, -0.19697350140487382], [-0.024070430648520328, 0.11676084262527342], [-0.06680200425120413, 0.08505337484447789], [-0.10780574034930106, 0.10658499734892368], [0.41115998654036345, -0.02695133803873448], [-0.004580992344114405, -0.18619032422098408], [0.3997250432883176, -0.042727215480790906], [-0.04544687594822034, 0.1036187211976407], [0.38575724916333426, -0.14606281481033695], [-0.07217688996535102, 0.02091105406127986], [-0.025656673062912475, 0.1243997364917343], [0.3800399640714514, 0.030160291995152386], [-0.49043322338975126, -0.22359596092709288], [-0.011598477147429797, 0.06479143522656651], [0.5116926699915125, -0.1064852775563208], [-0.06341462144949776, 0.04664274453866622], [0.3984452888040286, -0.05780469578845863], [0.16424763015319946, 0.3019184125216875], [0.25946661216189965, 0.35273202857330604], [-0.07144682175567574, 0.11685214733821048], [-0.4184821512028608, -0.18977671248366923], [0.43253661551727685, 0.12145987872855755], [-0.02774299202937388, 0.02566987870295706], [0.13924186000990002, -0.05462650304753983], [0.2674507229853731, -0.038408722071447285], [0.0005634625430859394, 0.01171618345712839], [-0.2807912048696547, 0.011991077957762282], [-0.4403967179544299, -0.20127281588878002], [-0.07259007385357413, 0.19525769740238413], [-0.21611620454593516, 0.04676380098038684], [0.1326677369116795, -0.049167753276700234], [-0.18485793686589097, 0.09761918976489771], [0.22330676048612666, -0.06396538114778419], [0.04791420696403613, -0.33269442784993625], [0.1093719498960355, -0.15933206520976165], [-0.12358123678669328, 0.025984965330248612]];

var colorPicker = ['palegreen', 'lightskyblue', 'gold', 'tomato', 'lightslategray', 'aqua', 'limegreen', 'darkorange', 'khaki', 'salmon'];

var textLegends = ["Romania", "Malta", "Kuwait", "Sweden", "United Kingdom", "Norway", "Hungary", "Canada", "France", "Polska", "Japan", "Greece", "Senegal", "Israel", "Argentina", "Morocco", "Thailanda", "Russia", "South Korea", "Cambodia", "Spain", "Albania", "Egypt", "South Africa", "Iraq", "Kenya", "An", "Switzerland", "Tunisia", "French Polynesia", "Colombia", "Luxembourg", "New Zealand", "Hong Kong", "China", "Turkey", "Philippines", "Nederland", "Lebanon", "French Guiana", "Italy", "Qatar", "Irlande", "Chile", "Martinique", "Slovakia", "Czech Republic", "Lithuania", "Mexico", "Algeria", "Denmark", "Germany", "Guadeloupe", "European Union", "United Arab Emirates", "Monaco", "Australia", "Serbia", "New Caledonia", "Austria", "Ukraine", "Burkina Faso", "Portugal", "Andorra", "Saint Pierre and Miquelon", "Finland", "Ireland", "Moldova", "Poland", "Venezuela", "Aruba", "Belgium", "Brazil", "Slovenia", "United States", "Singapore", "Taiwan", "Cuba", "Thailand", "Netherlands", "Scotland", "Indonesia", "Saudi Arabia", "Bulgaria", "India"];

var legends = [
    {"legend": "Additives", "color": colorPicker[0]},
    {"legend": "Energy", "color": colorPicker[1]},
    {"legend": "Fat", "color": colorPicker[2]},
    {"legend": "Carbohydrates", "color": colorPicker[3]},
    {"legend": "Sugars", "color": colorPicker[4]},
    {"legend": "Fiber", "color": colorPicker[5]},
    {"legend": "Proteins", "color": colorPicker[6]},
    {"legend": "Salt", "color": colorPicker[7]},
    {"legend": "Sodium", "color": colorPicker[8]},
    {"legend": "Alcohol", "color": colorPicker[9]}
];

var columnColor = {
    "Additives": colorPicker[0],
    "Energy": colorPicker[1],
    "Fat": colorPicker[2],
    "Carbohydrates": colorPicker[3],
    "Sugars": colorPicker[4],
    "Fiber": colorPicker[5],
    "Proteins": colorPicker[6],
    "Salt": colorPicker[7],
    "Sodium": colorPicker[8],
    "Alcohol": colorPicker[9]
};

var width = 1200;
var height = 800;
var axisSize = 50;
var barPadding = 10;

function clearSvg() {
    d3.select("#chart")
        .selectAll("*").remove();
}

function makeSvg() {
    clearSvg();
    var svg = d3.select("#chart")
        .append("svg")
        .attr("width", width + 2 * axisSize)
        .attr("height", height + 2 * axisSize);
    return svg;
}

var minX;
var maxX;
var minY;
var maxY;

var scaleX;
var scaleY;

function makeDotGraph(dataset) {
    minX = d3.min(dataset, function(d) { return d[0]; });
    maxX = d3.max(dataset, function(d) { return d[0]; });
    minY = d3.min(dataset, function(d) { return d[1]; });
    maxY = d3.max(dataset, function(d) { return d[1]; });

    var color = d3.scale.category20();

    scaleX = d3.scale.linear()
        .range([0, width])
        .domain([minX, maxX]);
    scaleY = d3.scale.linear()
        .range([height, 0])
        .domain([minY, maxY]);

    var svg = makeSvg();
    makeLines(svg, dataset);

    for (i = 0; i < dataset.length; i++) {
        svg.append("circle")
            .attr("id", "dot" + i)
            .attr("cx", function() {
                if (scaleX(dataset[i][0]) > width / 2)
                    return axisSize;
                else
                    return axisSize + width;
            })
            .attr("cy", function() {
                if (scaleY(dataset[i][1]) > height / 2)
                    return axisSize;
                else
                    return axisSize + height;
            })
            .attr("r", 10)
            .attr("fill", function() {
                return color(i);
            })
            .attr("opacity", "1.0")
            .transition()
            .delay(function() {
                return i * 5;
            })
            .duration(500)
            .attr("cx", function() {
                return scaleX(dataset[i][0]) + axisSize;
            })
            .attr("cy", function() {
                return scaleY(dataset[i][1]) + axisSize;
            });
    }

    makeLabels(svg, dataset);

    return svg;
}

function makeLabels(svg, dataset) {
    for (i = 0; i < dataset.length; i++) {
        svg.append("text")
            .attr("x", function() {
                return scaleX(dataset[i][0]) + axisSize;
            })
            .attr("y", function() {
                return scaleY(dataset[i][1]) + axisSize;
            })
            .attr("font-family", "Verdana")
            .attr("font-size", "12px")
            .attr("stroke", "white")
            .attr("stroke-width", "2.3px")
            .attr("opacity", "0.5")
            .text(textLegends[i]);
        svg.append("text")
            .attr("x", function() {
                return scaleX(dataset[i][0]) + axisSize;
            })
            .attr("y", function() {
                return scaleY(dataset[i][1]) + axisSize;
            })
            .attr("font-family", "Verdana")
            .attr("font-size", "12px")
            .text(textLegends[i]);
    }
}

function makeLines(svg, dataset) {


    var cSet = new Set();
    cSet.add(0);

    while (cSet.size != dataset.length) {
        k1 = 0;
        k2 = 0;
        d = Number.MAX_VALUE;
        for (let i of cSet.keys()) {
            console.log(i);
            for (j = 0; j < dataset.length; j++) {
                if (cSet.has(j) == false &&
                    Math.pow(dataset[i][0] - dataset[j][0], 2) + Math.pow(dataset[i][1] - dataset[j][1], 2) < d) {
                    d = Math.pow(dataset[i][0] - dataset[j][0], 2) + Math.pow(dataset[i][1] - dataset[j][1], 2);
                    k1 = i;
                    k2 = j;
                }
            }
        }

        x1 = scaleX(dataset[k1][0]) + axisSize;
        y1 = scaleY(dataset[k1][1]) + axisSize;
        x2 = scaleX(dataset[k2][0]) + axisSize;
        y2 = scaleY(dataset[k2][1]) + axisSize;
        svg.append("path")
            .attr("stroke", "#ffd800")
            .attr("stroke-width", "5px")
            .attr("fill", "none")
            .attr("d", function() {
                return "M" + x1 + "," + y1 + "L" + x2 + "," + y2;
            })
            .attr("opacity", "0.0")
            .transition()
            .delay(1000)
            .attr("opacity", "1.0")
        cSet.add(k2);
    }
}

makeDotGraph(dataset_isomap);
